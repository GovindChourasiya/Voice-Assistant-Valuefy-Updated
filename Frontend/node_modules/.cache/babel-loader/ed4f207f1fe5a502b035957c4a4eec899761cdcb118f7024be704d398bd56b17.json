{"ast":null,"code":"import{useState}from\"react\";import{extractTodos}from\"../services/api\";import{Loader2,Mic,ClipboardList}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TodoExtractor=_ref=>{let{onExtract}=_ref;const[text,setText]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[isListening,setIsListening]=useState(false);let recognition;const handleExtract=async()=>{if(!text.trim()||text===\"Listening...\")return;setLoading(true);setError(\"\");try{const result=await extractTodos(text);onExtract(result.todos,result.summary);}catch(err){setError(\"Failed to extract todos.\");}finally{setLoading(false);}};const startListening=()=>{if(!(\"webkitSpeechRecognition\"in window)){setError(\"Speech recognition is not supported in this browser.\");return;}setError(\"\");setIsListening(true);setText(\"Listening...\");// Show \"Listening...\" while recording\nrecognition=new window.webkitSpeechRecognition();recognition.continuous=false;recognition.interimResults=false;// Disable interim results to avoid duplicate words\nrecognition.lang=\"en-US\";recognition.onresult=event=>{const transcript=event.results[0][0].transcript;// Get final transcript\nsetText(transcript);};recognition.onerror=event=>{setError(\"Speech recognition error: \"+event.error);setIsListening(false);setText(\"\");// Clear input if an error occurs\n};recognition.onend=()=>{setIsListening(false);};recognition.start();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white shadow-lg rounded-3 border border-light w-100 mx-auto position-relative overflow-hidden\",style:{maxWidth:\"600px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute top-0 start-0 w-100 h-100 bg-gradient\",style:{opacity:0.2,zIndex:0}}),/*#__PURE__*/_jsxs(\"h2\",{className:\"fs-4 fw-bold text-dark mb-4 position-relative d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"me-2\"}),\" Extract Todos\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative w-100\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control position-relative\",rows:\"4\",value:text,onChange:e=>setText(e.target.value),placeholder:\"Enter meeting transcript...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startListening,className:`position-absolute bottom-0 end-0 m-2 p-2 rounded-circle text-white border-0 shadow-lg ${isListening?\"bg-danger\":\"bg-primary\"}`,children:/*#__PURE__*/_jsx(Mic,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExtract,className:\"mt-3 w-100 d-flex align-items-center justify-content-center btn btn-primary fw-semibold shadow-sm position-relative\",disabled:loading,children:loading?/*#__PURE__*/_jsx(Loader2,{className:\"spinner-border spinner-border-sm me-2\"}):\"Extract Todos\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-2 small fw-medium position-relative\",children:error})]});};export default TodoExtractor;","map":{"version":3,"names":["useState","extractTodos","Loader2","Mic","ClipboardList","jsx","_jsx","jsxs","_jsxs","TodoExtractor","_ref","onExtract","text","setText","loading","setLoading","error","setError","isListening","setIsListening","recognition","handleExtract","trim","result","todos","summary","err","startListening","window","webkitSpeechRecognition","continuous","interimResults","lang","onresult","event","transcript","results","onerror","onend","start","className","style","maxWidth","children","opacity","zIndex","rows","value","onChange","e","target","placeholder","onClick","disabled"],"sources":["D:/Valuefy/Frontend/src/components/TodoExtractor.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { extractTodos } from \"../services/api\";\r\nimport { Loader2, Mic, ClipboardList } from \"lucide-react\";\r\n\r\nconst TodoExtractor = ({ onExtract }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [isListening, setIsListening] = useState(false);\r\n  let recognition;\r\n\r\n  const handleExtract = async () => {\r\n    if (!text.trim() || text === \"Listening...\") return;\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const result = await extractTodos(text);\r\n      onExtract(result.todos, result.summary);\r\n    } catch (err) {\r\n      setError(\"Failed to extract todos.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const startListening = () => {\r\n    if (!(\"webkitSpeechRecognition\" in window)) {\r\n      setError(\"Speech recognition is not supported in this browser.\");\r\n      return;\r\n    }\r\n    setError(\"\");\r\n    setIsListening(true);\r\n    setText(\"Listening...\"); // Show \"Listening...\" while recording\r\n\r\n    recognition = new window.webkitSpeechRecognition();\r\n    recognition.continuous = false;\r\n    recognition.interimResults = false; // Disable interim results to avoid duplicate words\r\n    recognition.lang = \"en-US\";\r\n\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript; // Get final transcript\r\n      setText(transcript);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      setError(\"Speech recognition error: \" + event.error);\r\n      setIsListening(false);\r\n      setText(\"\"); // Clear input if an error occurs\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.start();\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 bg-white shadow-lg rounded-3 border border-light w-100 mx-auto position-relative overflow-hidden\" style={{ maxWidth: \"600px\" }}>\r\n      <div className=\"position-absolute top-0 start-0 w-100 h-100 bg-gradient\" style={{ opacity: 0.2, zIndex: 0 }}></div>\r\n\r\n      <h2 className=\"fs-4 fw-bold text-dark mb-4 position-relative d-flex align-items-center gap-2\">\r\n        <ClipboardList className=\"me-2\" /> Extract Todos\r\n      </h2>\r\n\r\n      <div className=\"position-relative w-100\">\r\n        <textarea\r\n          className=\"form-control position-relative\"\r\n          rows=\"4\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          placeholder=\"Enter meeting transcript...\"\r\n        />\r\n        <button\r\n          onClick={startListening}\r\n          className={`position-absolute bottom-0 end-0 m-2 p-2 rounded-circle text-white border-0 shadow-lg ${isListening ? \"bg-danger\" : \"bg-primary\"}`}\r\n        >\r\n          <Mic className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleExtract}\r\n        className=\"mt-3 w-100 d-flex align-items-center justify-content-center btn btn-primary fw-semibold shadow-sm position-relative\"\r\n        disabled={loading}\r\n      >\r\n        {loading ? <Loader2 className=\"spinner-border spinner-border-sm me-2\" /> : \"Extract Todos\"}\r\n      </button>\r\n\r\n      {error && <p className=\"text-danger mt-2 small fw-medium position-relative\">{error}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TodoExtractor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}