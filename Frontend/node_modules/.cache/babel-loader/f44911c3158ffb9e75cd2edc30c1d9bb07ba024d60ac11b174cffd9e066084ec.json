{"ast":null,"code":"import{useEffect,useState}from\"react\";import{fetchTodos,deleteTodo}from\"../services/api\";import AnimatedButton from\"../components/AnimatedButton\";import{motion}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TodosPage(){const[todosList,setTodosList]=useState([]);const[loading,setLoading]=useState(true);const[deletingTaskId,setDeletingTaskId]=useState(null);useEffect(()=>{async function loadTodos(){const todos=await fetchTodos();setTodosList(todos);setLoading(false);}loadTodos();},[]);// Function to delete a task (Mark as Done)\nconst markTaskAsDone=async(summaryId,taskId)=>{setDeletingTaskId(taskId);try{await deleteTodo(summaryId,taskId);setTodosList(prevTodos=>prevTodos.map(todo=>todo._id===summaryId?{...todo,tasks:todo.tasks.filter(task=>task._id!==taskId)}:todo).filter(todo=>todo.tasks.length>0)// Remove empty summaries\n);}catch(error){console.error(\"Error deleting task:\",error);}setDeletingTaskId(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\"})});}if(todosList.length===0){return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-4 text-danger fw-medium\",children:\"No todos available\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container py-5\",children:todosList.map(todo=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.4},className:\"bg-white shadow-lg rounded-3 p-4 mb-4 transition-all hover-shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fs-4 fw-bold text-primary mb-2 d-flex align-items-center\",children:\"\\uD83D\\uDCCC Meeting Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary\",children:todo.summary}),/*#__PURE__*/_jsx(\"h2\",{className:\"fs-5 fw-bold text-info mt-3\",children:\"\\uD83D\\uDCDD Tasks\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:todo.tasks.map(task=>/*#__PURE__*/_jsxs(motion.li,{initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{duration:0.3},className:\"d-flex justify-content-between align-items-center p-3 border rounded shadow-sm bg-light transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"fw-semibold text-dark\",children:task.task}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted small\",children:[\"\\uD83D\\uDCC5 Deadline: \",new Date(task.deadline).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(AnimatedButton,{onClick:()=>markTaskAsDone(todo._id,task._id),isLoading:deletingTaskId===task._id,label:\"Done\"})]},task._id))})]},todo._id))});}","map":{"version":3,"names":["useEffect","useState","fetchTodos","deleteTodo","AnimatedButton","motion","jsx","_jsx","jsxs","_jsxs","TodosPage","todosList","setTodosList","loading","setLoading","deletingTaskId","setDeletingTaskId","loadTodos","todos","markTaskAsDone","summaryId","taskId","prevTodos","map","todo","_id","tasks","filter","task","length","error","console","className","children","role","div","initial","opacity","y","animate","exit","transition","duration","summary","li","scale","Date","deadline","toLocaleDateString","onClick","isLoading","label"],"sources":["D:/Valuefy/Frontend/src/pages/TodosPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { fetchTodos, deleteTodo } from \"../services/api\";\r\nimport AnimatedButton from \"../components/AnimatedButton\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function TodosPage() {\r\n  const [todosList, setTodosList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [deletingTaskId, setDeletingTaskId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function loadTodos() {\r\n      const todos = await fetchTodos();\r\n      setTodosList(todos);\r\n      setLoading(false);\r\n    }\r\n    loadTodos();\r\n  }, []);\r\n\r\n  // Function to delete a task (Mark as Done)\r\n  const markTaskAsDone = async (summaryId, taskId) => {\r\n    setDeletingTaskId(taskId);\r\n    try {\r\n      await deleteTodo(summaryId, taskId);\r\n      setTodosList((prevTodos) =>\r\n        prevTodos\r\n          .map((todo) =>\r\n            todo._id === summaryId\r\n              ? { ...todo, tasks: todo.tasks.filter((task) => task._id !== taskId) }\r\n              : todo\r\n          )\r\n          .filter((todo) => todo.tasks.length > 0) // Remove empty summaries\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error deleting task:\", error);\r\n    }\r\n    setDeletingTaskId(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (todosList.length === 0) {\r\n    return <p className=\"text-center mt-4 text-danger fw-medium\">No todos available</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container py-5\">\r\n      {todosList.map((todo) => (\r\n        <motion.div\r\n          key={todo._id}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -20 }}\r\n          transition={{ duration: 0.4 }}\r\n          className=\"bg-white shadow-lg rounded-3 p-4 mb-4 transition-all hover-shadow\"\r\n        >\r\n          {/* Summary */}\r\n          <h2 className=\"fs-4 fw-bold text-primary mb-2 d-flex align-items-center\">üìå Meeting Summary</h2>\r\n          <p className=\"text-secondary\">{todo.summary}</p>\r\n\r\n          {/* Task List */}\r\n          <h2 className=\"fs-5 fw-bold text-info mt-3\">üìù Tasks</h2>\r\n          <ul className=\"list-unstyled\">\r\n            {todo.tasks.map((task) => (\r\n              <motion.li\r\n                key={task._id}\r\n                initial={{ scale: 0.9, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                exit={{ scale: 0.8, opacity: 0 }}\r\n                transition={{ duration: 0.3 }}\r\n                className=\"d-flex justify-content-between align-items-center p-3 border rounded shadow-sm bg-light transition-all\"\r\n              >\r\n                <div>\r\n                  <p className=\"fw-semibold text-dark\">{task.task}</p>\r\n                  <p className=\"text-muted small\">üìÖ Deadline: {new Date(task.deadline).toLocaleDateString()}</p>\r\n                </div>\r\n\r\n                {/* Done Button (Delete Task) */}\r\n                <AnimatedButton\r\n                  onClick={() => markTaskAsDone(todo._id, task._id)}\r\n                  isLoading={deletingTaskId === task._id}\r\n                  label=\"Done\"\r\n                />\r\n              </motion.li>\r\n            ))}\r\n          </ul>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}